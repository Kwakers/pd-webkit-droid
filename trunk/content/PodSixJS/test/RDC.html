<html>
<head>
	<style>
		#surface { width: 80%; left: 10%; height: 80%; top: 10%; position: absolute; }
		div { border: 1px solid black; }
	</style>
	
	<script src='../PodSix.js'></script>
	<script>
	function Square(surface)
	{
		var s = document.createElement("DIV");
		s.style.position = "absolute";
		s.style.left = (Math.random() * (surface.offsetWidth - 100)) + "px";
		s.style.top = (Math.random() * (surface.offsetHeight - 100)) + "px";
		s.style.width = "100px";
		s.style.height = "100px";
		
		this.repr = s;
		
		// if we collide with someone
		this.Collide = function(who)
		{
			this.repr.style.border = "2px solid red";
		}
		
		// functions for returning bounding box sides
		this.GetLeft = function()
		{
			return parseInt(this.repr.style.left);
		}
		
		this.GetRight = function()
		{
			return parseInt(this.repr.style.left) + this.repr.offsetWidth;
		}
		
		this.GetTop = function()
		{
			return parseInt(this.repr.style.top);
		}
		
		this.GetBottom = function()
		{
			return parseInt(this.repr.style.top) + this.repr.offsetHeight;
		}
	}
	
	function MakeSquares()
	{
		// make a bunch of square divs
		var squares = [];
		var surface = document.getElementById("surface");
		for (i = 0; i < 15; i++)
		{
			s = new Square(surface);
			surface.appendChild(s.repr);
			squares.push(s);
		}
		
		return squares;
	}
	
	function TestRDC()
	{
		axisFunctions = [["GetLeft", "GetRight"], ["GetTop", "GetBottom"]];
		var squares = MakeSquares();
		var rdc = new PodSix.RDC(axisFunctions);
		var groups = rdc.FindGroups(squares);
		for (g in groups)
		{
			PodSix.BruteForceRectangles(groups[g], axisFunctions);
			c = "#" + parseInt(Math.random() * 9) + "" + parseInt(Math.random() * 9) + "" + parseInt(Math.random() * 9);
			for (d in groups[g])
			{
				groups[g][d].repr.style.backgroundColor = c;
			}
		}
	}
	</script>
</head>
<body onLoad='TestRDC();'>
	<div id='surface'></div>
</body>
</html>
